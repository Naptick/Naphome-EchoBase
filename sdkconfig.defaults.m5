# M5 Atom Echo Base configuration defaults
# This file contains board-specific ESP-IDF configuration for M5 Atom S3R + Echo Base

CONFIG_BOARD_M5_ECHO_BASE=y

# M5 Atom S3R: ESP32-S3-PICO-1 with 8MB embedded flash + 8MB PSRAM
# Note: Echo Base adds 4MB on-chip storage (not primary)
CONFIG_ESPTOOLPY_FLASHSIZE=8MB

# Partition table configuration
CONFIG_PARTITION_TABLE_CUSTOM=y
CONFIG_PARTITION_TABLE_CUSTOM_FILENAME="partitions_m5.csv"

# Audio configuration
# Echo Base optimized for voice assistant (16 kHz STT)
CONFIG_AUDIO_SAMPLE_RATE=16000
CONFIG_LOG_SWEEP_DURATION_SEC=3
CONFIG_LOG_SWEEP_START_FREQ=100
CONFIG_LOG_SWEEP_END_FREQ=5000

# LED configuration
# M5 Echo Base has single SK6812 LED on GPIO 46
# For feature parity, can add external WS2812 ring on Atom S3R
CONFIG_LED_AUDIO_STRIP_GPIO=46
CONFIG_LED_AUDIO_LED_COUNT=1
CONFIG_LED_AUDIO_BRIGHTNESS=128

# Common ESP-IDF settings
CONFIG_ESP_DEFAULT_CPU_FREQ_MHZ=240
CONFIG_ESP_WIFI_AUTH_WPA2_PSK_SHA256=y
CONFIG_LWIP_IPV6=y

# USB Serial JTAG Console (works immediately on boot)
# USB CDC also available as secondary console
CONFIG_ESP_CONSOLE_USB_SERIAL_JTAG=y
CONFIG_ESP_CONSOLE_SECONDARY_USB_CDC=y

# Logging (reduced for smaller flash)
CONFIG_LOG_DEFAULT_LEVEL=1

# Memory optimization for 4MB flash
CONFIG_NEWLIB_NANO_FORMAT=y

# Reduce partition sizes
CONFIG_ESP_PARTITION_TABLE_OFFSET=0x8000

# Optional: PSRAM configuration (if available)
# CONFIG_SPIRAM=y
# CONFIG_SPIRAM_MODE_QUAD=y
# CONFIG_SPIRAM_TYPE_ESP3216=y
